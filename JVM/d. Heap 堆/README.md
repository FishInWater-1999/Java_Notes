# 堆 Heap

- 逻辑上由：新生 + 养老 + 元空间
- 物理上由：新生 + 养老




## 空间划分
- 1、**新生代 new**

  - 一个对象诞生、成长、消亡的区域

  - 1.1 伊甸园区

  - 1.2 幸存者 0 区

  - 1.3 幸存者 1 区

- 2、**老年代 old**

- 3、**元空间 **

	- Java8 之前叫永久区，Java8 开始改名为元空间 



## 流程

- 对象在伊甸区产生，当伊甸区满了时发生轻 GC
- 经过一次轻 GC （Minor GC ）且成活的进入幸存者 0 区
- 之后没经历一次轻 GC 就在 ‘ 幸存者 0 区 ’ 和 ‘ 幸存者 1 区 ’ 之间来回跑
- 经历 15 次轻 GC 后，进入老年区
- 当老年区满了时发生 Full GC
- 当老年区无论怎么 Full GC 都腾不出位置时报 OOM 错误



## OOM OutOfMemory 异常

- 导致：说明 JVM 的堆内存不够
- 发生原因一：JVM 堆内存设置不够，通过参数 -Xms、-Xmx 来调整
- 发生原因二：代码创建了大量大对象，并且长时间不能被回收，及内存泄漏